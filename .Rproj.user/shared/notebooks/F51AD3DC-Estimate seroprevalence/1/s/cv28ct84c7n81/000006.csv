"0","posterior_predict_sero_noise <- function(i, draws, ...) {"
"0","  draws$dpars$mu[, i]"
"0","}"
"0",""
"0","# test out the predict function on existing data"
"0","test <- predict(fit2)"
"0",""
"0",""
"0","# Generate predictions using the poststrat data"
"0","posterior_prob <- predict(fit2, newdata = poststrat, allow_new_levels = TRUE)"
"0",""
"0","# The posterior predict function uses the predicted value of the prevalence. This is Ok as long as we are just seeking point estimates. To fully account for uncertainty, we should draw from binom(N, p = posterior_prob[i])"
"0","poststrat_prob <- posterior_prob[,1] %*% poststrat$N / sum(poststrat$N)"
